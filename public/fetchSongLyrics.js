var BAND_NAME = "the thermals";


var songList = [
  {
    "name": "It's Trivia",
    "album": "More Parts per Million"
  },
  {
    "name": "Brace and Break",
    "album": "More Parts per Million"
  },
  {
    "name": "No Culture Icons",
    "album": "More Parts per Million"
  },
  {
    "name": "Goddamn the Light",
    "album": "More Parts per Million"
  },
  {
    "name": "Out of the Old And Thin",
    "album": "More Parts per Million"
  },
  {
    "name": "I Know the Pattern",
    "album": "More Parts per Million"
  },
  {
    "name": "Time to Lose",
    "album": "More Parts per Million"
  },
  {
    "name": "My Little Machine",
    "album": "More Parts per Million"
  },
  {
    "name": "Overgrown, Overblown!",
    "album": "More Parts per Million"
  },
  {
    "name": "A Passing Feeling",
    "album": "More Parts per Million"
  },
  {
    "name": "Back to Gray",
    "album": "More Parts per Million"
  },
  {
    "name": "Born Dead",
    "album": "More Parts per Million"
  },
  {
    "name": "An Endless Supply",
    "album": "More Parts per Million"
  },
  {
    "name": "Our Trip",
    "album": "Fuckin A"
  },
  {
    "name": "Every Stitch",
    "album": "Fuckin A"
  },
  {
    "name": "How We Know",
    "album": "Fuckin A"
  },
  {
    "name": "When You're Thrown",
    "album": "Fuckin A"
  },
  {
    "name": "Remember Today",
    "album": "Fuckin A"
  },
  {
    "name": "A Stare Like Yours",
    "album": "Fuckin A"
  },
  {
    "name": "Let Your Earth Quake, Baby",
    "album": "Fuckin A"
  },
  {
    "name": "God and Country",
    "album": "Fuckin A"
  },
  {
    "name": "End to Begin",
    "album": "Fuckin A"
  },
  {
    "name": "Forward",
    "album": "Fuckin A"
  },
  {
    "name": "Keep Time",
    "album": "Fuckin A"
  },
  {
    "name": "Top of the Earth",
    "album": "Fuckin A"
  },
  {
    "name": "Here's Your Future",
    "album": "The Body, the Blood, the Machine"
  },
  {
    "name": "I Might Need You to Kill",
    "album": "The Body, the Blood, the Machine"
  },
  {
    "name": "An Ear for Baby",
    "album": "The Body, the Blood, the Machine"
  },
  {
    "name": "A Pillar of Salt",
    "album": "The Body, the Blood, the Machine"
  },
  {
    "name": "Returning to the Fold",
    "album": "The Body, the Blood, the Machine"
  },
  {
    "name": "Test Pattern",
    "album": "The Body, the Blood, the Machine"
  },
  {
    "name": "St. Rosa and the Swallows",
    "album": "The Body, the Blood, the Machine"
  },
  {
    "name": "Back to the Sea",
    "album": "The Body, the Blood, the Machine"
  },
  {
    "name": "Power Doesn't Run on Nothing",
    "album": "The Body, the Blood, the Machine"
  },
  {
    "name": "I Hold the Sound",
    "album": "The Body, the Blood, the Machine"
  },
  {
    "name": "When I Died",
    "album": "Now We Can See"
  },
  {
    "name": "We Were Sick",
    "album": "Now We Can See"
  },
  {
    "name": "I Let It Go",
    "album": "Now We Can See"
  },
  {
    "name": "Now We Can See",
    "album": "Now We Can See"
  },
  {
    "name": "At the Bottom of the Sea",
    "album": "Now We Can See"
  },
  {
    "name": "When We Were Alive",
    "album": "Now We Can See"
  },
  {
    "name": "I Called Out Your Name",
    "album": "Now We Can See"
  },
  {
    "name": "When I Was Afraid",
    "album": "Now We Can See"
  },
  {
    "name": "Liquid In, Liquid Out",
    "album": "Now We Can See"
  },
  {
    "name": "How We Fade",
    "album": "Now We Can See"
  },
  {
    "name": "You Dissolve",
    "album": "Now We Can See"
  },
  {
    "name": "I'm Gonna Change Your Life",
    "album": "Personal Life"
  },
  {
    "name": "I Don't Believe You",
    "album": "Personal Life"
  },
  {
    "name": "Never Listen to Me",
    "album": "Personal Life"
  },
  {
    "name": "Not Like Any Other Feeling",
    "album": "Personal Life"
  },
  {
    "name": "Power Lies",
    "album": "Personal Life"
  },
  {
    "name": "Only for You",
    "album": "Personal Life"
  },
  {
    "name": "Alone, a Fool",
    "album": "Personal Life"
  },
  {
    "name": "Your Love Is So Strong",
    "album": "Personal Life"
  },
  {
    "name": "A Reflection",
    "album": "Personal Life"
  },
  {
    "name": "You Changed My Life",
    "album": "Personal Life"
  },
  {
    "name": "Born to Kill",
    "album": "Desperate Ground"
  },
  {
    "name": "You Will Be Free",
    "album": "Desperate Ground"
  },
  {
    "name": "The Sunset",
    "album": "Desperate Ground"
  },
  {
    "name": "I Go Alone",
    "album": "Desperate Ground"
  },
  {
    "name": "The Sword by My Side",
    "album": "Desperate Ground"
  },
  {
    "name": "You Will Find Me",
    "album": "Desperate Ground"
  },
  {
    "name": "Faces Stay with Me",
    "album": "Desperate Ground"
  },
  {
    "name": "The Howl of the Winds",
    "album": "Desperate Ground"
  },
  {
    "name": "Where I Stand",
    "album": "Desperate Ground"
  },
  {
    "name": "Our Love Survives",
    "album": "Desperate Ground"
  },
  {
    "name": "Into the Code",
    "album": "We Disappear"
  },
  {
    "name": "My Heart Went Cold",
    "album": "We Disappear"
  },
  {
    "name": "Hey You",
    "album": "We Disappear"
  },
  {
    "name": "If We Don't Die Today",
    "album": "We Disappear"
  },
  {
    "name": "The Great Dying",
    "album": "We Disappear"
  },
  {
    "name": "In Every Way",
    "album": "We Disappear"
  },
  {
    "name": "The Walls",
    "album": "We Disappear"
  },
  {
    "name": "Thinking of You",
    "album": "We Disappear"
  },
  {
    "name": "Always Never Be",
    "album": "We Disappear"
  },
  {
    "name": "Years in a Day",
    "album": "We Disappear"
  }
]





var songCounter = 0;
var allSongData = [];
var noSongName = [];

var app = new Vue({
    el: "#main-app",
    data: {
        songData: allSongData,
        noData: noSongName,
        counter: songCounter
    }

});


addSongLyrics(songList[songCounter]);


function addSongLyrics(songData){

    console.log(songData.name);


    var url = "http://lyric-api.herokuapp.com/api/find/" +  BAND_NAME + "/" + songData.name.replace(new RegExp("/", "g"), "%2F");

    console.log(`fetching ${url}`);

    axios.get(url)
      .then(function(response) {
        console.log(response);
        if(response.data.err != "none"){
            console.log("ERROR: " + response.data.err);
            noSongName.push(songData.name);
        } else {

            console.log(`got lyrics for ${songData.name}`);
            var songLyrics = response.data.lyric;

            var newSong = {
                name: songData.name,
                album: songData.album,
                lyrics: songLyrics,
            }


            allSongData.push(newSong);

        }

        songCounter++;

        if(songCounter < (songList.length - 1)){
            addSongLyrics(songList[songCounter]);
        } else {
            console.log("=========DONE======");
            console.log(songData);
        }


      })
}
