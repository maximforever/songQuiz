var BAND_NAME = "regina spektor";


var songList = [
  {
    "name": "Love Affair",
    "album": "11:11"
  },
  {
    "name": "Rejazz",
    "album": "11:11"
  },
  {
    "name": "Back of a Truck",
    "album": "11:11"
  },
  {
    "name": "Buildings",
    "album": "11:11"
  },
  {
    "name": "Marry Ann",
    "album": "11:11"
  },
  {
    "name": "Flyin'",
    "album": "11:11"
  },
  {
    "name": "Wasteside",
    "album": "11:11"
  },
  {
    "name": "Pavlov's Daughter",
    "album": "11:11"
  },
  {
    "name": "2.99¢ Blues",
    "album": "11:11"
  },
  {
    "name": "Braille",
    "album": "11:11"
  },
  {
    "name": "I Want to Sing",
    "album": "11:11"
  },
  {
    "name": "Sunshine",
    "album": "11:11"
  },
  {
    "name": "Samson",
    "album": "Songs"
  },
  {
    "name": "Oedipus",
    "album": "Songs"
  },
  {
    "name": "Prisoners",
    "album": "Songs"
  },
  {
    "name": "Reading Time with Pickle",
    "album": "Songs"
  },
  {
    "name": "Consequence of Sounds",
    "album": "Songs"
  },
  {
    "name": "Daniel Cowman",
    "album": "Songs"
  },
  {
    "name": "Bon Idée",
    "album": "Songs"
  },
  {
    "name": "Aching to Pupate",
    "album": "Songs"
  },
  {
    "name": "Lounge",
    "album": "Songs"
  },
  {
    "name": "Lacrimosa",
    "album": "Songs"
  },
  {
    "name": "Lullaby",
    "album": "Songs"
  },
  {
    "name": "Ne Me Quitte Pas",
    "album": "Songs"
  },
  {
    "name": "Ode to Divorce",
    "album": "Soviet Kitsch"
  },
  {
    "name": "Poor Little Rich Boy",
    "album": "Soviet Kitsch"
  },
  {
    "name": "Carbon Monoxide",
    "album": "Soviet Kitsch"
  },
  {
    "name": "The Flowers",
    "album": "Soviet Kitsch"
  },
  {
    "name": "Us",
    "album": "Soviet Kitsch"
  },
  {
    "name": "Sailor Song",
    "album": "Soviet Kitsch"
  },
  {
    "name": "Your Honor",
    "album": "Soviet Kitsch"
  },
  {
    "name": "Ghost of Corporate Future",
    "album": "Soviet Kitsch"
  },
  {
    "name": "Chemo Limo",
    "album": "Soviet Kitsch"
  },
  {
    "name": "Somedays",
    "album": "Soviet Kitsch"
  },
  {
    "name": "Fidelity",
    "album": "Begin to Hope"
  },
  {
    "name": "Better",
    "album": "Begin to Hope"
  },
  {
    "name": "Samson",
    "album": "Begin to Hope"
  },
  {
    "name": "On the Radio",
    "album": "Begin to Hope"
  },
  {
    "name": "Field Below",
    "album": "Begin to Hope"
  },
  {
    "name": "Hotel Song",
    "album": "Begin to Hope"
  },
  {
    "name": "Après Moi",
    "album": "Begin to Hope"
  },
  {
    "name": "20 Years of Snow",
    "album": "Begin to Hope"
  },
  {
    "name": "That Time",
    "album": "Begin to Hope"
  },
  {
    "name": "Edit",
    "album": "Begin to Hope"
  },
  {
    "name": "Lady",
    "album": "Begin to Hope"
  },
  {
    "name": "Summer in the City",
    "album": "Begin to Hope"
  },
  {
    "name": "The Calculation",
    "album": "Far"
  },
  {
    "name": "Eet",
    "album": "Far"
  },
  {
    "name": "Blue Lips",
    "album": "Far"
  },
  {
    "name": "Folding Chair",
    "album": "Far"
  },
  {
    "name": "Machine",
    "album": "Far"
  },
  {
    "name": "Laughing With",
    "album": "Far"
  },
  {
    "name": "Human of the Year",
    "album": "Far"
  },
  {
    "name": "Two Birds",
    "album": "Far"
  },
  {
    "name": "Dance Anthem of the 80's",
    "album": "Far"
  },
  {
    "name": "Genius Next Door",
    "album": "Far"
  },
  {
    "name": "Wallet",
    "album": "Far"
  },
  {
    "name": "One More Time with Feeling",
    "album": "Far"
  },
  {
    "name": "Man of a Thousand Faces",
    "album": "Far"
  },
  {
    "name": "Small Town Moon",
    "album": "What We Saw from the Cheap Seats"
  },
  {
    "name": "Oh Marcello",
    "album": "What We Saw from the Cheap Seats"
  },
  {
    "name": "Don’t Leave Me (Ne Me Quitte Pas)",
    "album": "What We Saw from the Cheap Seats"
  },
  {
    "name": "Firewood",
    "album": "What We Saw from the Cheap Seats"
  },
  {
    "name": "Patron Saint",
    "album": "What We Saw from the Cheap Seats"
  },
  {
    "name": "How",
    "album": "What We Saw from the Cheap Seats"
  },
  {
    "name": "All the Rowboats",
    "album": "What We Saw from the Cheap Seats"
  },
  {
    "name": "Ballad of a Politician",
    "album": "What We Saw from the Cheap Seats"
  },
  {
    "name": "Open",
    "album": "What We Saw from the Cheap Seats"
  },
  {
    "name": "The Party",
    "album": "What We Saw from the Cheap Seats"
  },
  {
    "name": "Jessica",
    "album": "What We Saw from the Cheap Seats"
  },
  {
    "name": "Bleeding Heart",
    "album": "Remember Us to Life"
  },
  {
    "name": "Older and Taller",
    "album": "Remember Us to Life"
  },
  {
    "name": "Grand Hotel",
    "album": "Remember Us to Life"
  },
  {
    "name": "Small Bill$",
    "album": "Remember Us to Life"
  },
  {
    "name": "Black and White",
    "album": "Remember Us to Life"
  },
  {
    "name": "The Light",
    "album": "Remember Us to Life"
  },
  {
    "name": "The Trapper and the Furrier",
    "album": "Remember Us to Life"
  },
  {
    "name": "Tornadoland",
    "album": "Remember Us to Life"
  },
  {
    "name": "Obsolete",
    "album": "Remember Us to Life"
  },
  {
    "name": "Sellers of Flowers",
    "album": "Remember Us to Life"
  },
  {
    "name": "The Visit",
    "album": "Remember Us to Life"
  }
]




var songCounter = 0;
var allSongData = [];
var noSongName = [];

var app = new Vue({
    el: "#main-app",
    data: {
        songData: allSongData,
        noData: noSongName,
        counter: songCounter
    }

});


addSongLyrics(songList[songCounter]);


function addSongLyrics(songData){

    console.log(songData.name);


    var url = "http://lyric-api.herokuapp.com/api/find/" +  BAND_NAME + "/" + songData.name.replace(new RegExp("/", "g"), "%2F");

    console.log(`fetching ${url}`);

    axios.get(url)
      .then(function(response) {
        console.log(response);
        if(response.data.err != "none"){
            console.log("ERROR: " + response.data.err);
            noSongName.push(songData.name);
        } else {

            console.log(`got lyrics for ${songData.name}`);
            var songLyrics = response.data.lyric;

            var newSong = {
                name: songData.name,
                album: songData.album,
                lyrics: songLyrics,
            }


            allSongData.push(newSong);

        }

        songCounter++;

        if(songCounter < songList.length){
            addSongLyrics(songList[songCounter]);
        } else {
            console.log("=========DONE======");
            console.log(songData);
        }


      })
}
